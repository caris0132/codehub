!function(){function p(e){for(var n=1;CKFinder._.instanceConfig[n];)n++;return CKFinder._.instanceConfig[n]=e,n}window.CKFinder=function(e,n,t,o){var i=this;i.BasePath=e||CKFinder.DEFAULT_BASEPATH,i.Width=n||"100%",i.Height=t||400,i.SelectFunction=o||null,i.SelectFunctionData=null,i.SelectThumbnailFunction=o||null,i.SelectThumbnailFunctionData=null,i.DisableThumbnailSelection=!1,i.ClassName="CKFinderFrame",i.StartupPath=null,i.StartupFolderExpanded=!1,i.RememberLastFolder=!0,i.ResourceType=null,i.Id=null,i.Skin=null},CKFinder.DEFAULT_BASEPATH="/ckfinder/",CKFinder.ConnectorLanguage="php",CKFinder._={instanceConfig:[]},CKFinder.prototype={Create:function(){document.write(this.CreateHtml())},CreateHtml:function(){var e=this,n=e.ClassName;n&&0<n.length&&(n=' class="'+n+'"');var t=e.Id;return t&&0<t.length&&(t=' id="'+t+'"'),'<iframe src="'+e._BuildUrl()+'" width="'+e.Width+'" height="'+e.Height+'"'+n+t+' frameborder="0" scrolling="no"></iframe>'},Popup:function(e,n){n=n||"70%","string"==typeof(e=e||"80%")&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),e<200&&(e=200),n<200&&(n=200);var t=parseInt((window.screen.height-n)/2,10),o=parseInt((window.screen.width-e)/2,10),i="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+e+",height="+n+",top="+t+",left="+o,r=window.open("","CKFinderPopup",i,!0);if(!r)return!1;var a=this._BuildUrl().replace(/&amp;/g,"&");try{r.moveTo(o,t),r.resizeTo(e,n),r.focus(),r.location.href=a}catch(e){r=window.open(a,"CKFinderPopup",i,!0)}return!0},_BuildUrl:function(e){var n,t=this,o="";return(e=e||t.BasePath)&&0!==e.length||(e=CKFinder.DEFAULT_BASEPATH),"/"!=e.substr(e.length-1,1)&&(e+="/"),e+="ckfinder.html",t.SelectFunction&&("function"==typeof(n=t.SelectFunction)&&(n=n.toString().match(/function ([^(]+)/)[1]),o+="?action=js&amp;func="+n),t.Skin&&(o+=o?"&amp;":"?",o+="skin="+encodeURIComponent(t.Skin)),t.SelectFunctionData&&(o+=o?"&amp;":"?",o+="data="+encodeURIComponent(t.SelectFunctionData)),t.ResourceType&&(o+=o?"&amp;":"?",o+="type="+encodeURIComponent(t.ResourceType)),t.DisableThumbnailSelection?(o+=o?"&amp;":"?",o+="dts=1"):(t.SelectThumbnailFunction||t.SelectFunction)&&("function"==typeof(n=t.SelectThumbnailFunction||t.SelectFunction)&&(n=n.toString().match(/function ([^(]+)/)[1]),o+=o?"&amp;":"?",o+="thumbFunc="+n,t.SelectThumbnailFunctionData?o+="&amp;tdata="+encodeURIComponent(t.SelectThumbnailFunctionData):!t.SelectThumbnailFunction&&t.SelectFunctionData&&(o+="&amp;tdata="+encodeURIComponent(t.SelectFunctionData))),t.StartupPath&&(o+=o?"&amp;":"?",o+="start="+encodeURIComponent(t.StartupPath+(t.StartupFolderExpanded?":1":":0"))),void 0===t.RememberLastFolder||t.RememberLastFolder||(o+=o?"&amp;":"?",o+="rlf=0"),t.Id&&(o+=o?"&amp;":"?",o+="id="+encodeURIComponent(t.Id)),e+o}},CKFinder.Create=function(e,n,t,o){var i;if(null!==e&&"object"==typeof e)for(var r in i=new CKFinder,e)i[r]=e[r];else i=new CKFinder(e,n,t,o);i.Create()},CKFinder.Popup=function(e,n,t,o){var i;if(null!==e&&"object"==typeof e)for(var r in p(e),i=new CKFinder,e)i[r]=e[r];else i=new CKFinder(e,n,t,o);i.Popup(n,t)},CKFinder.SetupFCKeditor=function(e,n,t,o){var i,r;if(null!==n&&"object"==typeof n){for(var a in r=p(n),i=new CKFinder,n)if(i[a]=n[a],"Width"==a){var c=i[a]||800;"string"==typeof c&&1<c.length&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.width*parseInt(c,10)/100,10)),e.Config.LinkBrowserWindowWidth=c,e.Config.ImageBrowserWindowWidth=c,e.Config.FlashBrowserWindowWidth=c}else if("Height"==a){var l=i[a]||600;"string"==typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),e.Config.LinkBrowserWindowHeight=l,e.Config.ImageBrowserWindowHeight=l,e.Config.FlashBrowserWindowHeight=l}}else i=new CKFinder(n);var d=i.BasePath;"/"!=d.substr(0,1)&&-1==d.indexOf("://")&&(d=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+d);var s=-1!==(d=i._BuildUrl(d)).indexOf("?")?"&":"?";r&&(d+=s+"configId="+r,s="&"),e.Config.LinkBrowserURL=d,e.Config.ImageBrowserURL=d+s+"type="+(t||"Images"),e.Config.FlashBrowserURL=d+s+"type="+(o||"Flash");var u=d.substring(0,1+d.lastIndexOf("/"));e.Config.LinkUploadURL=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type=Files",e.Config.ImageUploadURL=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(t||"Images"),e.Config.FlashUploadURL=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(o||"Flash")},CKFinder.SetupCKEditor=function(e,n,t,o){if(null!==e){var i,r;if(null!==n&&"object"==typeof n){for(var a in r=p(n),i=new CKFinder,n)if(i[a]=n[a],"Width"==a){var c=i[a]||800;"string"==typeof c&&1<c.length&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.width*parseInt(c,10)/100,10)),e.config.filebrowserWindowWidth=c}else if("Height"==a){var l=i[a]||600;"string"==typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),e.config.filebrowserWindowHeight=l}}else i=new CKFinder(n);var d=i.BasePath;"/"!=d.substr(0,1)&&-1==d.indexOf("://")&&(d=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+d);var s=-1!==(d=i._BuildUrl(d)).indexOf("?")?"&":"?";r&&(d+=s+"configId="+r,s="&"),e.config.filebrowserBrowseUrl=d,e.config.filebrowserImageBrowseUrl=d+s+"type="+(t||"Images"),e.config.filebrowserFlashBrowseUrl=d+s+"type="+(o||"Flash");var u=d.substring(0,1+d.lastIndexOf("/"));e.config.filebrowserUploadUrl=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type=Files",e.config.filebrowserImageUploadUrl=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(t||"Images"),e.config.filebrowserFlashUploadUrl=u+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(o||"Flash")}else{for(var g in CKEDITOR.instances)CKFinder.SetupCKEditor(CKEDITOR.instances[g],n,t,o);CKEDITOR.on("instanceCreated",function(e){CKFinder.SetupCKEditor(e.editor,n,t,o)})}}}();